<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>An introduction to New6Dof constraints :: The Libbulletjme project</title>
    <link rel="canonical" href="https://stephengold.github.io/Libbulletjme/lbj-en/English/new6dof.html">
    <link rel="prev" href="vehicle.html">
    <link rel="next" href="collision.html">
    <meta name="generator" content="Antora 3.1.9">
    <link rel="stylesheet" href="../../_/css/site.css">
<meta property="og:image" content="../../_/img/iconx128.png">
<meta property="og:description" content="An introduction to New6Dof constraints">
<meta property="og:title" content="The Libbulletjme project">
<link rel="icon" href="../../_/img/favicon.ico" type="image/x-icon">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://stephengold.github.io/Libbulletjme">
        <img alt="" src="../../_/img/iconx128.png" width="32" type="image/x-icon" style="margin-right:16px">
        The Libbulletjme project
      </a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Color themes</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" onclick="setTheme('canyon')">Canyon</a>
            <a class="navbar-item" onclick="setTheme('dark')">Dark</a>
            <a class="navbar-item" onclick="setTheme('jungle')">Jungle</a>
            <a class="navbar-item" onclick="setTheme('light')">Light</a>
            <a class="navbar-item" onclick="setTheme('pastel')">Pastel</a>
            <a class="navbar-item" onclick="setTheme('phosphor')">Phosphor<a>
            <a class="navbar-item" style="padding-top: 5px;padding-left: 1px;padding-right: 1px;"></button>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="lbj-en" data-version="English">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="overview.html">Project links</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="implementation.html">Implementation</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Library tutorials</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="add.html">Add to existing project</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="sport.html">SPORT visualization</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="rigidbody.html">Rigid bodies</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="shape.html">Collision shapes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="character.html">Characters</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="vehicle.html">Vehicles</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="new6dof.html">New6Dof constraints</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="collision.html">Managing collisions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="softbody.html">Soft bodies</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="debug.html">Troubleshooting</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="misc.html">Miscellany</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="build.html">Build procedures</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="demos.html">Demo apps</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="lexicon.html">Type lexicon</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="https://github.com/stephengold/Libbulletjme">GitHub repository</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/Libbulletjme/releases/latest">Latest release</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/Libbulletjme/releases">Recent releases</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/Libbulletjme/blob/master/README.md">ReadMe file</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://raw.githubusercontent.com/stephengold/Libbulletjme/master/LICENSE">License</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/Libbulletjme/blob/master/release-notes.md">Release log</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/Libbulletjme/commits/master">Recent commits</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/Libbulletjme/issues">Issue tracker</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/Libbulletjme/issues/new">Report an issue</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Library APIs (javadoc)</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Libbulletjme/javadoc/master">"master" branch</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Libbulletjme at other sites</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://repo1.maven.org/maven2/com/github/stephengold/Libbulletjme">Maven Central download</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://central.sonatype.com/search?q=Libbulletjme&amp;namespace=com.github.stephengold">Maven Central search</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://jitpack.io/#stephengold/Libbulletjme">JitPack (unofficial)</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Projects using Libbulletjme</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie">Minie</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://dynamx.fr/">DynamX</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/LbjExamples">LbjExamples</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/macana">Macana</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/sport">SPORT</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/V-Sport">V-Sport</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Other related projects</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://pybullet.org/wordpress">Bullet</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://jmonkeyengine.org">JMonkeyEngine</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/Simsilica/SimMath">SimMath</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/kmammou/v-hacd">V-HACD</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/antora-ui-bundle">Website UI bundle</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">People</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io">Stephen Gold</a>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-text">Yanis Boudiaf</span>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">The Libbulletjme project</span>
    <span class="version">English</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">The Libbulletjme project</span>
      <ul class="versions">
        <li class="version is-current">
          <a href="overview.html">English</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle-label">Project links</span>
<button class="nav-toggle"></button>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="overview.html">The Libbulletjme project</a></li>
    <li>Library tutorials</li>
    <li><a href="new6dof.html">New6Dof constraints</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/stephengold/LbjExamples/edit/master/docs/en/modules/ROOT/pages/new6dof.adoc">Edit this page</a></div>
  </div>
  <div class="content">
<article class="doc">
<h1 class="page">An introduction to New6Dof constraints</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>A <em>physics joint</em> connects one physics body to another
(or to a fixed point in space), constraining how the body(s) can move.</p>
</div>
<div class="paragraph">
<p>For instance, a door might swing on hinges.
In simulation, the hinges would be represented by a joint
with a single <em>degree of freedom</em> (DOF):
rotation around the axis of the hinges.
Such joints are called <em>hinge joints</em>.</p>
</div>
<div class="paragraph">
<p>Or a door might slide along a track.
In that case, the track would be represented by a joint
that’s free to translate, but only along the axis of the track.
To simulate this, you&#8217;d use a joint with one translational DOF,
called a <em>slider joint</em>.</p>
</div>
<div class="paragraph">
<p>Or imagine a pen holder mounted on a ball-and-socket:
it can freely turn and twist to any orientation,
but the ball end can’t leave the socket.
To simulate this, you&#8217;d use a joint with 3 rotational DOFs,
called a <em>point-to-point joint</em>.</p>
</div>
<div class="paragraph">
<p>Some physics joints can connect soft bodies or portions thereof.
In Libbulletjme, a joint that can only connect rigid bodies
is called a <em>constraint</em>.</p>
</div>
<div class="paragraph">
<p><a href="https://stephengold.github.io/Libbulletjme/javadoc/master/com/jme3/bullet/joints/New6Dof.html"><code>New6Dof</code></a> is a constraint
that replaces the older <a href="https://stephengold.github.io/Libbulletjme/javadoc/master/com/jme3/bullet/joints/SixDofJoint.html"><code>SixDofJoint</code></a>
and <a href="https://stephengold.github.io/Libbulletjme/javadoc/master/com/jme3/bullet/joints/SixDofSpringJoint.html"><code>SixDofSpringJoint</code></a> constraints.
As its name implies,
<code>New6Dof</code> can simulate up to 6 DOFs.
It&#8217;s so versatile, it can also emulate 4 other constraints:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="https://stephengold.github.io/Libbulletjme/javadoc/master/com/jme3/bullet/joints/ConeJoint.html"><code>ConeJoint</code></a></p>
</li>
<li>
<p><a href="https://stephengold.github.io/Libbulletjme/javadoc/master/com/jme3/bullet/joints/HingeJoint.html"><code>HingeJoint</code></a></p>
</li>
<li>
<p><a href="https://stephengold.github.io/Libbulletjme/javadoc/master/com/jme3/bullet/joints/Point2PointJoint.html"><code>Point2PointJoint</code></a></p>
</li>
<li>
<p><a href="https://stephengold.github.io/Libbulletjme/javadoc/master/com/jme3/bullet/joints/SliderJoint.html"><code>SliderJoint</code></a></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>It might be the only physics joint you&#8217;ll ever need.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_features"><a class="anchor" href="#_features"></a>Features</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A <code>New6Dof</code> constraint can be instantiated
either as a <em>double-ended</em> constraint (connecting 2 rigid bodies)
or as a <em>single-ended</em> constraint (connecting a rigid body to a fixed point).</p>
</div>
<div class="paragraph">
<p><code>New6Dof</code> can simulate up to 3 rotation DOFs
and up to 3 translation DOFs, so an instance
can potentially rotate or slide on any axis or axes.
By default, the translation DOFs are <em>locked</em> at a zero,
while the rotation DOFs are <em>free</em> to assume any angular value.
In other words, it defaults to a point-to-point joint.</p>
</div>
<div class="paragraph">
<p>By locking and/or unlocking DOFs, you simulate different types of joints:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For a hinge joint, lock all but one of the rotation DOFs.</p>
</li>
<li>
<p>For a slider joint, lock all 3 rotation DOFs
and unlock one of the translation DOFs.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In addition to being locked or free, there&#8217;s a 3rd possibility;
a DOF can be <em>limited</em>:  allowed to assume values only in a specific range.
By imposing limits, you can prevent a door from sliding or swinging
beyond certain points.</p>
</div>
<div class="paragraph">
<p>In addition to limits, <code>New6Dof</code>
also implements motors, servos, and springs:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Using a <em>motor</em>, you can apply forces to open or close a door.</p>
</li>
<li>
<p>Using a <em>servo</em>, you can cause a door
to move smoothly to a specific position, as if under remote control.</p>
</li>
<li>
<p>Using a <em>spring</em>, you can cause a door to automatically return
to a neutral position when released.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can also:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>specify the order in which axis rotations are combined,</p>
</li>
<li>
<p>disable a constraint temporarily,</p>
</li>
<li>
<p>configure the amount of applied impulse that will
<em>break</em> (permanently disable) a constraint,</p>
</li>
<li>
<p>customize the number of iterations used to solve a constraint, and</p>
</li>
<li>
<p>(for a double-ended constraint) configure
whether collisions between the end bodies should be simulated or not.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_caveats"><a class="anchor" href="#_caveats"></a>Caveats</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A <code>New6Dof</code> constraint
can only connect rigid bodies (including vehicles):
no ghost objects, characters, multibodies, or soft bodies.</p>
</div>
<div class="paragraph">
<p>For a constraint to be effective:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the constraint and its connected body(s)
must all be added to the same physics space, and</p>
</li>
<li>
<p>at least one of its ends must be a dynamic rigid body.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Even when locked, constraints exhibit some softness.
A strong force, torque, or impulse can drag a locked DOF out of position
or overpower the limits of a limited DOF.
This is because the contact-and-constraint solver
doesn&#8217;t immediately correct all position errors in physics joints.
During each simulation step, it corrects only a fraction of each error,
by default, 20%.
This fraction is the solver&#8217;s <em>error-reduction parameter</em> (ERP).</p>
</div>
<div class="paragraph">
<p>For faster corrections (with more risk of instability) increase the ERP.
For instance, to correct 90% of joint-position errors during each simulation step:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">physicsSpace.getSolverInfo().setJointErp(0.9f); // default=0.2</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_constructors"><a class="anchor" href="#_constructors"></a>Constructors</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The ends of a double-ended physics joint are denoted "A" and "B",
based on their order of appearance in the constructor.</p>
</div>
<div class="paragraph">
<p>By convention, the body connected to a single-ended
<code>New6Dof</code> is denoted "B".
In effect, the "A" end of a single-ended constraint
connects to the physics space itself.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Certain other <a href="https://stephengold.github.io/Libbulletjme/javadoc/master/com/jme3/bullet/joints/Constraint.html"><code>Constraint</code></a>
subclasses use the opposite end-naming convention for single-ended constraints.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>There are 2 <code>New6Dof</code> constructors,
one for a single-ended constraint:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">new New6Dof(rigidBodyB, pivotInB, pivotInWorld, rotInB, rotInWorld,
            rotationOrder);</code></pre>
</div>
</div>
<div class="paragraph">
<p>and one for a double-ended constraint:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">new New6Dof(rigidBodyA, rigidBodyB, pivotInA, pivotInB,
            rotInA, rotInB, rotationOrder);</code></pre>
</div>
</div>
<div class="paragraph">
<p>The "pivot" and "rot" parameters define coordinate systems
used in the constraint.</p>
</div>
<div class="paragraph">
<p>Consider that a constraint potentially involves 4 coordinate systems:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>the local coordinate system of the rigid body at the "B" end,</p>
</li>
<li>
<p>B&#8217;s notion of the constraint coordinate system,</p>
</li>
<li>
<p>the coordinate system of the "A" end, which is either:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>the local coordinate system of the rigid body
(in a double-ended constraint) or else</p>
</li>
<li>
<p>the physics-space coordinate system (in a single-ended constraint), AND</p>
</li>
</ol>
</div>
</li>
<li>
<p>A&#8217;s notion of the constraint coordinate system.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>If all 6 DOFs were locked, then satisfying the constraint
would involve making system #2 match system #4 exactly.</p>
</div>
<div class="paragraph">
<p>For a constraint that rotates,
the pivot point should be the origin of the constraint&#8217;s coordinate system.</p>
</div>
<div class="paragraph">
<p>Each "pivot" parameter is defines the origin of a coordinate system,
and each "rot" parameter defines its orientation.
(Each "pivot" is an offset vector, and each "rot" is a
<a href="https://en.wikipedia.org/wiki/Orthogonal_matrix">rotation matrix</a>.)
To transform a location vector from system #2 to system #1,
one would multiply by the <code>rotInB</code> matrix and then add the <code>pivotInB</code> vector.
To transform a location vector from system #4 to system #3,
one would multiply by the <code>rotInA</code> (or <code>rotInWorld</code>) matrix
and then add the <code>pivotInA</code> (or <code>pivotInWorld</code>) vector.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
To reduce complexity, it helps to initially position
the constraint and its end body(s) so that their local coordinate systems
all share the same orientation.
Then you can specify <code>Matrix3f.IDENTITY</code> for each "rot" parameter.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_example_apps"><a class="anchor" href="#_example_apps"></a>Example apps</h3>
<div class="paragraph">
<p><a href="https://github.com/stephengold/LbjExamples/blob/master/apps/src/main/java/com/github/stephengold/lbjexamples/apps/HelloJoint.java">HelloJoint</a> (also <a href="https://github.com/stephengold/LbjExamples/blob/master/kotlin-apps/src/main/kotlin/com/github/stephengold/lbjexamples/ktapps/HelloJoint.kt">in Kotlin</a>) is a SPORT app
that demonstrates a single-ended <code>New6Dof</code> constraint.</p>
</div>
<div class="paragraph">
<p>Things to notice while running the app:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The gray paddle is kinematic, moved by the mouse.</p>
</li>
<li>
<p>A magenta ball hangs from a single-ended point-to-point joint,
indicated by the red arrow.</p>
</li>
<li>
<p>If you strike the ball with the paddle, it swings around, maintaining
a constant distance from the pivot point.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><a href="https://github.com/stephengold/LbjExamples/blob/master/apps/src/main/java/com/github/stephengold/lbjexamples/apps/HelloDoubleEnded.java">HelloDoubleEnded</a> (also <a href="https://github.com/stephengold/LbjExamples/blob/master/kotlin-apps/src/main/kotlin/com/github/stephengold/lbjexamples/ktapps/HelloDoubleEnded.kt">in Kotlin</a>) is a SPORT app
that demonstrates a double-ended <code>New6Dof</code> constraint.</p>
</div>
<div class="paragraph">
<p>Things to notice while running the app:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The gray paddle is moved by the mouse.</p>
</li>
<li>
<p>A double-ended point-to-point joint (indicated by red and green arrows)
connects the ball to the paddle.</p>
</li>
<li>
<p>If the paddle moves fast enough, the red and green arrows no longer meet.
Even though all 3 translation DOFs are locked, the paddle&#8217;s
motion drags them out of position.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_limits"><a class="anchor" href="#_limits"></a>Limits</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The degrees of freedom are indexed as follows&#8230;&#8203;</p>
</div>
<div class="ulist">
<ul>
<li>
<p>0: translation parallel to the X axis</p>
</li>
<li>
<p>1: translation parallel to the Y axis</p>
</li>
<li>
<p>2: translation parallel to the Z axis</p>
</li>
<li>
<p>3: rotation around the X axis</p>
</li>
<li>
<p>4: rotation around the Y axis</p>
</li>
<li>
<p>5: rotation around the Z axis</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To impose limits on a DOF that is locked or free,
use the <code>set()</code> method with lowerLimit &lt; upperLimit.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">constraint.set(MotorParam.LowerLimit, dofIndex, lowerLimit);
constraint.set(MotorParam.UpperLimit, dofIndex, upperLimit);</code></pre>
</div>
</div>
<div class="paragraph">
<p>To lock a DOF that is limited or free, set both limits to the same value.</p>
</div>
<div class="paragraph">
<p>To free a DOF that is limited or locked,
use the <code>set()</code> method with lowerLimit &gt; upperLimit.
(For a free DOF, the precise limit values have no significance.)</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The limits of a rotational DOF are measured in radians.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><a href="https://github.com/stephengold/LbjExamples/blob/master/apps/src/main/java/com/github/stephengold/lbjexamples/apps/HelloLimit.java">HelloLimit</a> (also <a href="https://github.com/stephengold/LbjExamples/blob/master/kotlin-apps/src/main/kotlin/com/github/stephengold/lbjexamples/ktapps/HelloLimit.kt">in Kotlin</a>) is a SPORT app
that demonstrates a single-ended <code>New6Dof</code> constraint
with limited translation DOFs.
The joint&#8217;s translations are limited,
confining the ball to a horizontal square centered on the origin.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_motors"><a class="anchor" href="#_motors"></a>Motors</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Motors are used to apply forces to a constraint.
In <code>New6Dof</code>, each DOF has its own motor, which is disabled by default.</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/stephengold/LbjExamples/blob/master/apps/src/main/java/com/github/stephengold/lbjexamples/apps/HelloMotor.java">HelloMotor</a> (also <a href="https://github.com/stephengold/LbjExamples/blob/master/kotlin-apps/src/main/kotlin/com/github/stephengold/lbjexamples/ktapps/HelloMotor.kt">in Kotlin</a>) is a SPORT app
that demonstrates a double-ended <code>New6Dof</code>
with its Y-rotation motor enabled.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>All DOFs except Y rotation are locked at zero.</p>
</li>
<li>
<p>Y rotation is limited between 0 and 1.2 radians.</p>
</li>
<li>
<p>The pivot is located just to the left of the door.</p>
</li>
<li>
<p>Press <kbd>Space bar</kbd> to reverse the direction of the motor.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The force (or torque) applied by each motor is limited.
To change this limit,
use the <code>set()</code> method with <code>MotorParam.MaxMotorForce</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">constraint.set(MotorParam.MaxMotorForce, dofIndex, force);</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For translation DOFs, the default maximum force is zero!
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_servos"><a class="anchor" href="#_servos"></a>Servos</h2>
<div class="sectionbody">
<div class="paragraph">
<p>It&#8217;s difficult to position a constraint using motors alone.
Without positional feedback,
the constraint tends to keep accelerating until some limit is hit.
Servos implement feedback, allowing for smooth, gradual motion.
In <code>New6Dof</code>, each DOF has its own servo, which is disabled by default.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For a servo to be effective, its corresponding motor must also be enabled.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><a href="https://github.com/stephengold/LbjExamples/blob/master/apps/src/main/java/com/github/stephengold/lbjexamples/apps/HelloServo.java">HelloServo</a> (also <a href="https://github.com/stephengold/LbjExamples/blob/master/kotlin-apps/src/main/kotlin/com/github/stephengold/lbjexamples/ktapps/HelloServo.kt">in Kotlin</a>) is a SPORT app
that demonstrates a double-ended <code>New6Dof</code> constraint
with its Y-rotation servo enabled.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>All DOFs except Y rotation are locked at zero.</p>
</li>
<li>
<p>Y rotation is limited between 0 and 1.2 radians.</p>
</li>
<li>
<p>The pivot is located just to the left of the door.</p>
</li>
<li>
<p>Press <kbd>1</kbd> to gradually open the door all the way.</p>
</li>
<li>
<p>Press <kbd>3</kbd> to gradually rotate the door
to the one-third open position.</p>
</li>
<li>
<p>Press <kbd>4</kbd> to gradually close the door all the way.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>To adjust a servo&#8217;s rate of motion,
use the <code>set()</code> method with <code>MotorParam.TargetVelocity</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">constraint.set(MotorParam.TargetVelocity, dofIndex, velocity);</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The default target velocity is zero!
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_springs"><a class="anchor" href="#_springs"></a>Springs</h2>
<div class="sectionbody">
<div class="paragraph">
<p>By default, a DOF that&#8217;s limited or free has no preferred position.
To change this, enable the DOF&#8217;s spring
and set its stiffness to a positive value.
If desired, you can also configure
the spring&#8217;s equilibrium value and damping ratio.</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/stephengold/LbjExamples/blob/master/apps/src/main/java/com/github/stephengold/lbjexamples/apps/HelloSpring.java">HelloSpring</a> (also <a href="https://github.com/stephengold/LbjExamples/blob/master/kotlin-apps/src/main/kotlin/com/github/stephengold/lbjexamples/ktapps/HelloSpring.kt">in Kotlin</a>) is a SPORT app
that demonstrates a single-ended constraint with springs.</p>
</div>
<div class="paragraph">
<p>Things to notice while running the app:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The joint&#8217;s X and Z translation DOFs are free.</p>
</li>
<li>
<p>Springs on the X and Z translation DOFs
cause the ball to accelerate toward its equilibrium location.</p>
</li>
<li>
<p>Since there&#8217;s no damping, the ball tends to oscillate.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_summary"><a class="anchor" href="#_summary"></a>Summary</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Physics joints constrain the motion of connected bodies.</p>
</li>
<li>
<p>In Libbulletjme, joints for rigid bodies are called constraints.</p>
</li>
<li>
<p><code>New6Dof</code> is a versatile constraint
with 6 degrees of freedom (DOFs).
It can emulate hinges, sliders, and point-to-point joints.</p>
</li>
<li>
<p>Constraint DOFs will exhibit some softness, even when locked.
This can be mitigated by increasing the error-reduction parameter (ERP).</p>
</li>
<li>
<p><code>New6Dof</code> also implements limits, motors, servos, and springs.</p>
</li>
</ul>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="vehicle.html">Vehicles</a></span>
  <span class="next"><a href="collision.html">Managing collisions</a></span>
</nav>
</article>
<aside class="toc sidebar" data-title="Page contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <p>Copyright &copy; 2020&ndash;2024 by Stephen Gold</p>
</footer>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
